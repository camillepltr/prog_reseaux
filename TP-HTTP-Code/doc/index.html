<!doctype html>
<html>

	<head>
		<title>TP HTTP</title>
	</head>

	<body>
		<h1>TP HTTP</h1>
        Below you can try POST, HEAD, PUT and DELETE Requests.

        <h2>POST</h2>
		Enter the name of a file to test POST request on : <input id="file_post" >
		<button onclick="testPOST('file_post')">Submit using POST</button>

        <h2>HEAD</h2>
        Enter the name of a file to test HEAD request on : <input id="file_head" >
        <button onclick="testHEAD('file_head')">Submit using HEAD</button>

        <h2>DELETE</h2>
        Enter the name  of a file to test DELETE request on : <input id="file_delete" >
        <button onclick="testDELETE('file_delete')">Submit using DELETE</button>
        
        <h2>PUT</h2>
        Enter the name  of a file to test PUT request on : <input id="file_put" >
		<button onclick="testPUT('file_put')">Submit using PUT</button>


        <script>
            testHEAD = function(entry) {
            	let url = document.getElementById(entry).value;
            	let xmlhttp = new XMLHttpRequest();
            	xmlhttp.open("HEAD", url, true);
            	xmlhttp.send(null);
            	xmlhttp.onreadystatechange=function() {
            		if(xmlhttp.readyState==4) {
            			console.log(xmlhttp.getAllResponseHeaders());
            		}
            	}
            }

            testDELETE = function(entry) {
            
                let url = document.getElementById(entry).value;
                let xmlhttp = new XMLHttpRequest();
                xmlhttp.open("DELETE", url, true); 
                xmlhttp.send(null); 
                xmlhttp.onreadystatechange=function() {
                    if(xmlhttp.readyState==4) { 
                        console.log(xmlhttp.getAllResponseHeaders());
                    }
                }
            }
            
            
            testPUT = function(entry) {
                let url = document.getElementById(entry).value;
                let xmlhttp = new XMLHttpRequest();
                xmlhttp.open("PUT", url, false); 
                xmlhttp.send("This is a new message to replace the old file content\r\n"); 
                xmlhttp.onreadystatechange=function() {
                    if(xmlhttp.readyState==4) { 
                        console.log(xmlhttp.getAllResponseHeaders());
                    }
                }
            }
            
            testPOST = function(entry) {
				let url = document.getElementById(entry).value;
                let xmlhttp = new XMLHttpRequest();
                xmlhttp.open("POST", url, true); 
                xmlhttp.send("This is a new message to add at the end of the file.\r\n"); 
                xmlhttp.onreadystatechange=function() {
	                if(xmlhttp.readyState==4) { 
	                    console.log(xmlhttp.getAllResponseHeaders());
	                }
                }
            }
        </script>


	</body>

</html>